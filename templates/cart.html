<!DOCTYPE html>
{% csrf_token %}
{% load static %}
<html>

<head>
    <!-- LINE Tag Base Code -->
    <!-- Do Not Modify -->
    <script>
        (function (g, d, o) {
            g._ltq = g._ltq || []; g._lt = g._lt || function () { g._ltq.push(arguments) };
            var h = location.protocol === 'https:' ? 'https://d.line-scdn.net' : 'http://d.line-cdn.net';
            var s = d.createElement('script'); s.async = 1;
            s.src = o || h + '/n/line_tag/public/release/v1/lt.js';
            var t = d.getElementsByTagName('script')[0]; t.parentNode.insertBefore(s, t);
        })(window, document);
        _lt('init', {
            customerType: 'account',
            tagId: 'c9120633-6601-4f3d-95bc-b53858d0458a'
        });
        _lt('send', 'pv', ['c9120633-6601-4f3d-95bc-b53858d0458a']);
    </script>
    <noscript>
        <img height="1" width="1" style="display:none"
            src="https://tr.line.me/tag.gif?c_t=lap&t_id=c9120633-6601-4f3d-95bc-b53858d0458a&e=pv&noscript=1" />
    </noscript>
    <!-- End LINE Tag Base Code -->

    <link rel="stylesheet" href="{% static 'cpu.css' %}">
    <meta charset="utf-8">
    <title>購物車</title>
</head>

<body>
    <h1 style="text-align: center;">購物車</h1>


    <form method="post"> {% csrf_token %}
        <input type="submit" name="button" id="dataID" onclick="del()" value="清空購物車" />
    </form>
    
    <h1>共有{{cart_all|length}}筆資料</h1>
    <table border="1" cellpadding="0" cellspzcing="0" width="100%">
        <th>刪除</th>
        <th>品牌</th>
        <th>商品圖片</th>
        <th>商品名稱</th>
        <th>價格</th>
        <th>詳細資訊</th>
        <th>購買連結</th>

        {% for cart in cart_all %}
        <tr align="center">
            <form method="post" action="/cart/"> {% csrf_token %}
                <td><button value="{{ cart.name }}" onclick="cart(this.value ,'{{ forloop.counter }}')"
                        id="{{ forloop.counter }}" name="cart_del">刪除</button></td>
            </form>
            <td>{{cart.vendor}}</td>
            <td><img src="{{cart.pc_images}}" width="100" height="100"></td>
            <td>{{cart.name}}</td>
            <td>{{cart.price}}</td>
            <td>{{cart.commodity}}</td>
            <td><input type="button" value="購買連結" onclick="window.open('{{aaa.url_list}}')"></td>


        </tr>
        {% endfor %}
    </table>





    {% csrf_token %}
    <script>
        function del() {
            var msg = "您真的確定要清空購物車嗎？\n請確認！";
            if (confirm(msg) == true) {
                document.getElementById('dataID').value = 'Yes';
                alert("已清除!");
            } else {
                document.getElementById('dataID').value = 'NO';
                alert("取消!");
            }
        } 
    </script>

    {% csrf_token %}
    <script>
        function cart(value1, id) {
            var msg = "確定將｛" + value1 + "｝移出購物車?";
            if (confirm(msg) == true) {
                alert("成功");
                history.go(0);
            }
            else {
                document.getElementById(id).value = 'NO'
                alert("取消");
                history.go(0);
            }
        } 
    </script>
    {% if total.price__sum == None %}
    <h1 style="color: red; align-items: flex-end; text-align: end;">總計＄0</h1>
    {% else %}
    <h1 style="color: rgb(253, 0, 0); align-items: flex-end; text-align: end;">總計＄{{ total.price__sum }}</h1>
    {% endif %}
</body>

</html>